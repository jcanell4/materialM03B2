<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Activitat d'aprenetatge per introduir el concepte de funció i la operativa bàsica per a declarar-les i fer-les servir durant la codificació.">
    <meta name="author" content="Josep Cañellas i Alicia Vila ">
    <title>A502. Estructura de dades</title>
    <!-- Bootstrap Core CSS -->
    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/bootstrap.min.css" type="text/css"/>
<!--    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/styles/default.min.css">-->
    <link rel="stylesheet" href="../js/styles/default.css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    
    <!-- Custom CSS -->
    <!--link to css slides-->
    <link href="../css/m03b2Activities.css" rel="stylesheet">
    <link href="../css/scrolling-slides.css" rel="stylesheet">
    <link href="../css/highlightActivities.css" rel="stylesheet">
</head>
<!-- The #page-top ID is part of the scrolling feature - the data-spy and data-target are part of the built-in Bootstrap scrollspy function -->

<body id="page-top">
<!-- Navigation hidden panel -->
    <aside>
        <a id="menu-toggle" href="#" class="btn btn-dark toggle after-top-menu" title="Informació"><i class="glyphicon glyphicon-info-sign"></i></a>
        <nav id="sidebar-wrapper" class=" after-top-menu">           
            <ul class="sidebar-nav">
                <a id="menu-close" href="#" class="btn btn-light pull-right toggle">
                    <i class="glyphicon glyphicon-remove-circle"></i>
                </a>
                <li class="sidebar-brand">
                    <a href="#slc-toStart"  onclick = '$("#menu-close").click();' >Inici activitat</a>
                </li>
                <li>
                    <a href="#" onclick = 'return $("#goals_info").togglePanelOnClick();'>Objectius</a>
                </li>
                <li> 
                    <a class="toActivityTable targetBlank" onclick = '$("#menu-close").click();'>Taula d'activitats</a>
                </li>
                <li>
                    <a class="toProjectStatement" onclick = '$("#menu-close").click();' >Enunciat del projecte</a>
                </li>
                <li>
                    <a href="#" onclick ='return $("#more_reinforcement").togglePanelOnClick(); '>Per reforçar</a>
                </li>
                <li>
                    <a href="#" onclick ='return $("#more_info").togglePanelOnClick(); '>Més informació per ampliar</a>
                </li>
            </ul>
        </nav>
        <nav id="bottom-wrapper">
             <!-- SCROLL PREVIOUS BUTTON -->
            <span id="prevArrow" class="btn arrownav previousSection" ></span>
            <!-- END SCROLL PREVIOUS BUTTON -->
             <!-- SCROLL NEXT BUTTON -->
            <span id="nextArrow" class="btn arrownav nextSection" ></span>
            <!-- END SCROLL NEXT BUTTON -->
        </nav>        
    </aside>
    <!--=========== BEGIN HEADER SECTION ================-->
     <header id="header">
         <!-- BEGIN TOP MENU -->
        <div class="menu_area">
            <nav class="navbar navbar-default navbar-fixed-top" role="navigation"> 
                <!-- LOGO -->
                <span class="navbar-brand navbar-left logo-nav"><img src="../images/logo.png" title="{{$LOGO_TITLE}}" /></span>
                <div class="container-fluid">
                    <div class="navbar-header">
                    <!-- FOR MOBILE VIEW COLLAPSED BUTTON -->
                        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                          <span class="sr-only">Menú</span>
                          <span class="icon-bar"></span>
                          <span class="icon-bar"></span>
                          <span class="icon-bar"></span>
                        </button>
                    </div>
                    <div id="navbar" class="navbar-collapse collapse">
                        <ul id="top-menu" class="nav navbar-nav navbar-right main_nav">
                          <li class="active"><a href="#slc-toStart">Inici</a></li> 
                          <li><a href="#slc-toDo">Tasques a realitzar</a></li>
                          <li><a href="#slc-toDelivery">Lliurament</a></li> 
                          <li><a href="#slc-toContinue">Com continuar</a></li> 
                        </ul>           
                    </div>
                </div>     
            </nav>  
        </div>
        <!-- END TOP MENU -->
   </header>
    <!--=========== END HEADER SECTION ================-->
    
    <!--=========== BEGIN MAIN SLIDER SECTION ================-->    
    <div id="mainSlider" class="iocMainPanel">
        <div class="slides">
            <!--=========== BEGIN SECTION toStart ================-->    
            <section id="slc-toStart" class="section">
                <div class="container">  <!--Bootstrap container-->
                    <!-- header -->            
                    <div class="row">
                        <div class="col-lg-12">
                            <div class= "headSlide">
                                 <h2 >Inici activitat A502 - Estructura de dades</h2>
                             </div>
                        </div>
                    </div>
                    <!-- body -->            
                    <div class="row">
                        <div class="col-lg-12">
                             <div class=bodySlide>
                                <p>Durant la implementació d'una aplicació, tenir clara l'estructura de dades, és probablement una de les tasques claus per garantir l'èxit del projecte, juntament amb l'anàlisi i el disseny que haureu de realitzar en la següent activitat. De moment, en aquesta, donarem només forma a les estructures que permetin gestionar les dades i implementarem les funcions bàsiques per manipular-les, assegurant que sempre es mantindrà la seva coherència. </p>
                                <p>Abans de començar, donada la importància d'aquest procés, ens hem posat en contacte amb el camping i ens han comentat que en aquesta primera versió, les tarifes poden estar fixades al codi, no s'han de poder introduir dinàmicament. Només es requerix de poder escollir entre dues possibles tarífes a l'inici, just en executar l'aplicació. Un cop escollida la tarífa, aquesta es mantindrà mentre no se surti de l'aplicació.</p>
                                <p>Ens han comentat també que, com es desprén de l'enunciat, en aquesta versió no s'han de tractar les dades personals dels clients. L'aplicació només ha d'enregistrar les dades necesàries per poder calcular l'import a pagar en el moment de la sortida d'algun client. A continuació mostrarem aquí les dades referents a la ocupació que cal mantenir per cada parcel·la del camping.</p>
                                <ul>
                                    <li>La data en que el client s'hi va instal·lar. Les parcel·les buides tindran el valor zero en aquest camp.</li>
                                    <li>El nombre d'adults instal·lats a la parcel·la.</li>
                                    <li>El nombre de menors de 12 anys.</li>
                                    <li>Si el client guarda el cotxe a la parcel·la.</li>
                                    <li>Si el clinet guarda una moto a la parcel·la</li>
                                    <li>Si estan connectats a la xarxa electrica</li>
                                    <li>Si estan tenen contractat el servei d'aigua corrent</li>
                                </ul>
                                <p>A continuació us proposem de fer 2 tasques relacionades amb el disseny de les estructures de dades i la gestió de les mateixes. Tingueu en compte la informació de l'enunciat i la que aquí se us ha donat.</p>
                             </div>
                        </div>
                    </div>
                </div>
            </section>
            <!--=========== END SECTION toStart ================-->    
            <!--=========== BEGIN SECTION implementació ================-->    
            <section id="slc-toDo" class="vsections">
                <!--=========== BEGIN SUBSECTION estructura de dades ================-->    
                <section id="slc-estructuraDeDades" class="tasca section">
                    <div class="container">
                        <div class="row">
                            <div class="col-lg-12">
                                <div class= "headSlide">
                                     <h2 >Tasques a realitzar-Estructura de dades</h2>
                                     <h3 > <span class="tascaTitle">Tasca</span> - Disseny i implementació de les estructures de dades</h3>
                                 </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-12">
                                <div class=bodySlide>
                                    <p>A l'activitat <a class="A501ToDo30" target="_blank">A501</a> vau veure que una classe que contingui variables, pot constituir un tipus compost i que els tipus compostos són la base de les estructures de dades de les aplicacions. A la tasca 3, vau veure diferents implementacions d'una mateixa estructura. Com ja vau constatar, les estructures complexes poden implementar-se de múltiple maneres, i segurament no existeix una única implementació millor que les altres, sinó més aviat, cal adonar-se que unes implementacions faciliten uns tractaments en detriment dels altres. L'ideal és poder escollir aquella implementació que suposi més avantatges que inconvenients per els tractaments que caldrà realitzar a la nostra aplicació.</p>                                    
                                    <p>A fi que us resulti molt més fàcil de decidir quina estructura caldrà implementar, us proposem que us organitzeu en grups de discussió reduïts de màxim <span class="midaGrupCol"></span> persones per poder-hi discutir i valorar les dades que caldrà contemplar, de quin tipus s'hauran de declarar, etc. Es tracta només d'un grup de discussió i d'intercanvi d'idees que us ajudi prendre la vostra decisió pròpia. No cal per tant, que arribeu a cap consens, ni que tots acabeu implementat la mateixa estructura.</p>
                                    <p>Per poder iniciar la discussió cal que escolliu un grup amb places disponibles a <span class="triaGrupCol"></span>. A l'hora de fer l'elecció, penseu que no tothom porta la mateixa velocitat i que anireu incorporant-vos als grups a mida que aneu acabant. Intenteu omplir els grups incomplerts abans d'encetar un grup nou, això us garantirà que podeu començar la discussió sense dilacions. Penseu que els grups són dinàmics i podeu canviar quan ho desitgeu (només cal fer el canvi des de <span class="triaGrupCol"></span>), així no us heu de preocupar massa a l'hora d'escollir, si el grup no us acaba de fer el pes, o creieu que no funciona i que us pot resultar més profitós fer un canvi, només haureu de fer el tràmit. L'única restricció és el nombre de places, ja que només us deixarà canviar a grups que restin incomplerts. Fins que no escolliu un grup no podreu visualitzar el fòrum, per tant, ALERTA! que si no escolliu grup no podreu hi participar. </p>
                                    <p>Un cop hàgiu escollit el grup dirigiu-vos al <span class="forumDeDiscussio">ERROR - fòrum de discussió del període</span> per començar la discussió. <strong>HEU D'EVITAR ESCRIURE EXPLÍCITAMENT L'ESTRUCTURA DE DADES</strong> pròpia del projecte, només es tracta d'expressar idees i argumentar-les. Tingueu en compte que en acabar la discussió del fòrum us hauria de quedar clar quines variables i de quin tipus han de compondre l'estructura de l'aplicació.  El següent guió us ajudarà a donar consistència a la discussió. Llegiu-lo abans de participar.</p>
                                    <div class="frameBox">
                                        <h4>Guió de discussió en el <span class="forumDeDiscussio">ERROR - fòrum de discussió del període</span></h4>
                                        <p>Tingueu sempre present que tal com s'indica a l'enunciat, els objectius principals del prototipus que se us han encomanat, és:</p>
                                        <ol>
                                            <li>Poder detectar quines són les parcel·les lliures que els nous clients poden ocupar</li>
                                            <li>Poder calcular i mostrar per pantalla la factura que cal presentar al client en el moment que marxi.</li>
                                            <li>Mantenir les parcel·les actualitzades pel que fa a la seva ocupació. Això implica deslliurar-les tan aviat com sigui possible per poder oferir als nous clients un llistat real de les parcel·les desocupades. </li>
                                        </ol>
                                        <p>En base a això contesteu les següents qüestions en el fòrum: </p>
                                        <ol class="nestedCounter">
                                            <li>Cal entendre la factura com la suma imputable a de diferents conceptes: parcel·la, adults, menors, cotxe, etc. 
                                                <ol>
                                                    <li>Enumereu, concepte per concepte, quines dades necessitareu per fer el càlcul del valor imputable a cada concepte.</li>
                                                    <li>Sabrieu troba una fórmula general que descrigui el càlcul d'un concepte en funció d'un nombre fix de paràmetres que representin totes les dades implicades en el càlcul? Quins serien aquest paràmetres? Seria possible aplicar el mateixos paràmetres a tots els conceptes?</li>
                                                </ol>
                                            </li>
                                            <li>Recordeu que el càmping disposa de dues tarifes, la de la temporada baixa i la de la temporada alta. Recordeu que l'usuari ha de seleccionar la tarifa a utilitzar tot just quan s'iniciï l'aplicació, la qual es mantindrà efectiva fins que no es canviï. Cada cop que l'usuari demani un canvi i esculli una nova tarifa aquesta es mantindrà fins el següent canvi. Recordeu també que cada tarifa inclou els preus dels diferents conceptes facturables que es descriuen a l'enunciat del projecte. 
                                                <ol>
                                                    <li>Tenint en compte l'enunciat del projecte on s'indiquen els preus de les tarifes, quin tipus de dades bàsic (short, int, boolean, ...) creieu que necessitaríeu per emmagatzemar-hi un dels preus? </li>
                                                    <li>Com creieu que podeu guardar el conjunt de preus que componen una tarifa, usant variables de tipus bàsics o bé fent servir arrays?</li>
                                                    <li>Com penseu que podeu mantenir la referència a les dues tarifes dins la vostra estructura, usant dues variables independents o bé fent-ne servir només una? Quin tipus de dada caldria usar per a cada una de les opcions diferents. És a dir quin tipus de dades cal fer servir per representar les dues tarifes en dues variables independents y quin per representar les dues tarifes però en una única variable?</li>
                                                    <li>De quina manera penseu que ha de ser possible mantenir de forma permanent quina és la tarifa vigent? En què consistiria fer una canvi de tarifa?</li>
                                                </ol>
                                            </li>
                                            <!--li>A quin àmbit penseu que pertanyen les dades d'ocupació utilitzades per a calcular les factures, als clients o a les parcel·les?</li-->
                                            <li>Com emmagatzemaríeu les dades referents a una única ocupació (data d'instal·lació, nombre de persones instal·lades, etc.)? quin tipus de dada o estructura faríeu servir? </li>
                                            <li>En referència al conjunt de dades de totes les ocupacions:
                                                <ol>
                                                    <li>Com emmagatzemaríeu el conjunt de dades de totes les ocupacions?</li>
                                                    <li>La forma que heu escollit permet detectar també les parcel·les no ocupades? Si no és així, com creieu que cal detectar-les? Què caldria afegir o canviar de l'estructura per tal que sigui possible la detecció?</li>
                                                </ol>
                                            </li>
                                            <li>Heu tingut en compte en les propostes anteriors, la necessitat de marcar les parcel·les que cal controlar la desocupació degut que ja han estat pagades? Si no fos així, què proposeu canviar a l'estructura de dades a fi que sigui possible detectar-les?</li>
                                            <li>Tal com heu pensat l'estructura, en què consistiria el procés de desocupar una parcel·la. És a dir, quins dades hauríeu de modificar per tal d'indicar a la sistema que la parcel·la numero X ha estat desocupada i per tant queda buida?</li>
                                        </ol>
                                    </div>
                                    <!-- Button trigger pannel -->
                                    <button type="button" class="btn btn-primary btn-lg btn-toggle toggle-off" 
                                            data-toggle="button"
                                            data-parent-selector="#leftColumnPanel"
                                            data-display-on-set-slide="slc-estructuraDeDades" 
                                            data-selector-clue="#slc-estructuraDeDades-clue1">
                                        Pista 1
                                    </button>                                        
                                    <div id="slc-estructuraDeDades-clue1" class="iocClue hidden">
                                        <h2>Pista 1</h2>
                                        <ol class="nestedCounter">
                                            <li>En referència al càlcul de la factura
                                                <ol>
                                                    <li>Cal indicar les dades necessàries per cada concepte. Per exemple pel concepte adults, caldria tenir en compte el preu unitari del concepte extret de la tarifa vigent, el nombre de dies i el nombre d'adult que han pernoctat a la parcel·la. </li>
                                                    <li>Una possible fórmula seria: IC = Q * D * PU, on IC seria l'import imputable a un concepte (resultat del càlcul), Q la quantitat referida al concepte en sí (nombre d'adults per exemple), D, el nombre de dies i PU seria el preu unitari del concepte extret de la tarifa vigent.  El principal problema d'aquest fórmula és que alguns conceptes no tenen quantitat ja que només s'imputen un sol cop (el servei d'electricitat per exemple). Creieu que malgrat tot seria possible mantenir la fórmula en aquest casos? Quin valor hauria de valer Q si el client tingués contractat el servei de electricitat? I si no el tingués contractat, quant hauria de valer Q? </li>
                                                </ol>
                                            </li>
                                            <li>En referència a les tarifes,
                                                <ol>
                                                    <li>Cal tenir present que alguns preus unitaris tenen 2 decimals. Mireu la taula de preus de l'enunciat.</li>
                                                    <li>Coneixeu algun tipus bàsic que permeti emmagatzemar més d'una única dada? Per exemple quants enters es poden guardar en una variable de tipus int? I si la variable fos un array d'enters, quants valors podria emmagatzemar?</li>
                                                    <li>Si una tarifa es representa com un array del tipus bàsic específic, com es representaria un array de dues tarifes, és a dir, un array de arrays? consulteu el document d'ampliació <a class="docArrays">C49</a>, per disposar de més informació sobre els arrays multidimensionals.</li>
                                                    <li>Creieu que cal afegir una variable extra per reconèixer quina és la tarifa vigent? De quin tipus seria?</li>
                                                </ol>
                                            </li>
                                            <li>Per emmagatzemar les dades d'una ocupació cal trobar algun tipus estructurat. Es podrien usar arrays o tipus compostos. Els tipus compostos permeten agrupar dades de tipus diversos. I els arrays, permeten agrupar dades de diferents tipus? Abans de prendre una decisió tingueu en compte que fer servir tipus compostos incrementa la complexitat de la codificació, par tant, amb els vostres coneixements el més aconsellable seria que féssiu servir arrays. La qüestió doncs és plantejar-se, es possible convertir totes les dades referents a l'ocupació d'una parcel·la en un tipus compatible amb l'array a fer servir? Per exemple de quit tipus ha de ser la dada que emmagatzema la quantitat d'adults? I la data? I la contractació o no d'un servei com l'electricitat? Seria però possible convertir totes les dades en un mateix tipus? Quin?</li>
                                            <li> En referencia al conjunt de totes les ocupacions
                                                <ol>
                                                    <li>De forma similar al conjunt de tarifes, el conjunt d'ocupacions serà un array. Ara bé, el tipus d'array dependrà de la decisió que hàgiu pres representar una ocupació. Si heu escollit un array, quina tipus haurà de tenir l'array d'arrays que representi el conjunt d'ocupacions? </li>
                                                    <li>Quina dada i amb quin valor permetria distingir si una parcel·la està o no ocupada? Podeu fer servir la pròpia data o seria preferible usar alguna altra.</li>
                                                </ol>
                                            </li>
                                            <li>Hi ha alguna forma de detectar que la parcel·la està pagada i que la desocupació es produirà de forma imminent o cal afegir una nova dada? Si hagués de ser nova, quin tipus hauria de tenir la dada per tal que fos compatible amb l'estructura existent?</li>
                                            <li>Quins valors caldria assignar i a quines dades per tal que la parcel·la podés detectar-se com a buida?</li>
                                        </ol>
                                        <p>.</p>
                                    </div>  
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                <!--=========== END SUBSECTION estructura de dades  ================-->    
                <!--=========== BEGIN SECTION gestor de dades ================-->    
                <section id="slc-gestorDeDades" class="tasca section">
                    <div class="container">
                        <div class="row">
                            <div class="col-lg-12">
                                <div class= "headSlide">
                                     <h2 >Tasques a realitzar-Estructura de dades</h2>
                                     <h3 > <span class="tascaTitle">Tasca</span> - Implementació del gestor dades</h3>
                                 </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-12">
                                <div class=bodySlide>
                                    <p>En aquesta tasca se us demana que implementeu un gestor de dades perquè us ajudi a manipular l'estructura de dades que acabeu de crear a la tasca anterior. Heu de crear el gestor de dades en una classe anomenada <em>GestorDadesCamping</em>. Totes les funcions del gestor de dades hauran de rebre sempre, per paràmetre, una instància de l'estructura amb les dades a manipular. Lògicament la majoria d'elles, necessitaran a més, altres paràmetres que variaran en funció de l'acció a realitzar. Algunes de les funcions que us proposem que implementeu són:</p>
                                    <ul>
                                        <li>Un funció que rebi una instància de l'estructura de dades i un identificador d'una parcel·la i retorni el numero identificador de la primera parcel·la buida que trobi amb un número igual o superior al passat per paràmetre</li>
                                        <li>Un funció que rebi una instància de l'estructura de dades i un identificador d'una parcel·la i retorni el numero identificador de la primera parcel·la a controlar (pagada) que trobi amb un número igual o superior al passat per paràmetre</li>
                                        <li>Una funció que rebi una instància de l'estructura de dades i un identificador d'una parcel·la i manipuli les dades d'ocupació de la parcel·la a fi de desocupar-la i així pugui ser detectada com a parcel·la buida.</li>
                                        <li>Una funció que rebi una instància de l'estructura de dades, més totes les dades necessàries per enregistrar la ocupació d'una parcel·la (la parcel·la seleccionada, la data d'entrada, el nombre d'adults, el nombre de menors, si guarda el cotxe a la parcel·la, etc.). La funció enregistrà les dades passades dins l'estructura de forma coherent.</li>
                                        <li>Una funció que rebi una instància de l'estructura de dades, un identificador d'una parcel·la i la data de partida d'un client i faci el càlcul de la factura i en mostri el detall per la pantalla amb les consideracions que s'indiquen a l'enunciat.</li>
                                    </ul>
                                    <p>Plantegeu-vos també si seria necessari crear una funció per inicialitzar l'estructura de dades o si considereu que caldria implementar altres funcions que us puguin ajudar en la implementació final.</p>
                                    <p>Abans però, us demanem que llegiu les següents reflexions i consideracions sobre el tema, que us poden ajudar en la implementació.</p>
                                    <div class="iocimportant">
                                    <p>Mantenir les dades juntes i organitzades en una estructura, no garanteix però, la coherència interna d'aquestes. La organització de les dades juga un paper molt important, però quan implementem aplicacions usant estructures de dades, és també important vetllar per la coherència de les mateixes. Tenir un disseny de dades amb una estructura impecable, amb contingut incoherent vindria a ser com redactar una frase sintàcticament ben escrita però semànticament sense sentit ("la casa caminava lentament" és un exemple de frase ben construïda sintàcticament, però semànticament errònia).</p>
                                    <p>Malauradament, els errors deguts a una incoherència interna de les dades d'una estructura són molt comuns i cal trobar maneres d'evitar-los. Ja sabem que no disposem de cap vareta màgica per trobar la solució, però sempre que codifiquem ens hauríem d'imposar trobar maneres d'evitar les incoherències o, si més no, de reduir-ne la possibilitat.</p>
                                    <h4>incoherència en modificar les dades</h4>
                                    <p>Les incoherències solen produir-se perquè sovint una acció sobre les dades pot implicar canvis en diversos elements de l'estructura. Si durant la codificació ens oblidem de fer algun dels canvis necessaris, ens trobarem davant d'un error realment difícil de detectar.</p>                                    
                                    <p>Hi ha una manera d'evitar aquest tipus d'errades. Consisteix en crear funcions específiques que s'encarreguin de fer tots els canvis a la vegada. Caldrà identificar aquelles accions que modifiquin l'estructura en diversos llocs i en conseqüència siguin susceptibles de generar incoherències, i crear per aquestes una funció encarregada de fer l'acció de forma sempre complerta i correcta. És aconsellable mantenir totes les funcions específiques d'una mateixa estructura de dades agrupades en una única classe.</p>
                                    <p>Imaginem que hem de gestionar una estructura que contingui una llista variable de dades. Per exemple, imaginem que hem de codificar el registre d'alumnes matriculats d'una escola. El nombre d'alumnes que es matricularan és impossible de saber a priori. Si s'opta per crear una estructura amb un comptador de matriculats, a més de l'array de dades dels alumnes, tindrem una estructura semblant a:</p>
                                    <pre><code class="java">
package ioc.m03.uf2;

public class DadesAlumnes {
    public String[] alumnes;
    public int matriculats;
}
                                    </code></pre>
                                    <p>Com es pot suposar, cada cop que fem una matrícula, cal afegir el nom de l'alumne a una posició lliure de l'array <em>alumnes</em> i cal actualitzar el valor de l'element matriculats. També caldria fer quelcom semblant per donar de baixa una matrícula, etc.</p>
                                    <p>Per gestionar aquestes accions sense errades, decidim crear una classe específica, anomenada GestorDadesAlumnes, encarregada d'implementar accions d'alt nivell sobre instancies del tipus compost <em>DadesAlumnes</em>:</p>
                                    <pre><code class="java">

public class GestorDadesAlumnes {
    
    public void novaMatriculaAlumne(DadesAlumnes dades, String alumne){
        //Cal afegir les dades del nou alumne
        dades.alumnes[dades.matriculats]=alumne;
        //I també cal incrementar el comptador de matriculats
        dades.matriculats++;
    }
    
    public void baixaAlumne(DadesAlumnes dades, int posicioAlumneAEliminar){
        //Cal traslladar l'alumne a eliminar més enllà del límit indicat pel comptador de matrícules,
        //a fi quedi amagat i no s'hi pugui accedir; com si s'hagués eliminat.
        for(int i=posicioAlumneAEliminar; i&lt;dades.matriculats; i++){
            String[] aux = dades.alumnes[i];
            dades.alumnes[i]=dades.alumnes[i+1];
            dades.alumnes[i+1] = aux;
        }
        //I en aquest cas, cal decrementar el comptador.
        dades.matriculats--;
    }
    
    ...
}
                                    </code></pre>
                                    <p>D'aquesta manera, si a la implementació de l'aplicació es fa servir sempre la funció del gestor, les dades seran sempre coherents.</p>
                                    <h4>incoherència en la inicialització de les dades</h4>
                                    <p>La inicialització de les dades d'una estructura també acostuma a ser una font d'incoherències i errades, ja que algunes vegades, abans de fer servir una instancia de tipus compost és necessari donar valors específics a alguns dels seus elements per tal que les seves dades siguin coherents, o s'ajustin al que s'espera. En ocasions n'hi haurà prou només inicialitzant un array a la dimensió correcta o instanciant els tipus compostos interns.</p>
                                    <p>Per exemple, en el cas anterior de la gestió de matrícules, necessitarem dimensionar l'array d'alumnes a la mida màxima abans de començar a treballar. Com que la mida màxima dependrà del renom de l'escola, del municipi/barri on estigui i fins i tot de l'any en que es faci la matrícula, es pot optar per deixar la dimensió configurable en el moment de començar. Podem encarregar al gestor de dades GestorDadesAlumnes l'acció de crear i d'inicialitzar una instancia dimensionada a una mida especificada des de paràmetre, estimada per l'ajuntament:
</p>
                                    <pre><code class="java">
  public DadesAlumnes crearDadesAlumnes(int dimensio){
        DadesAlumnes dades = new DadesAlumnes();
        dades.alumnes=new String[dimensio];
        return dades;
    }
                                    </code></pre>
                                    <p>Recordeu que en JAVA, tots els tipus simples (short, int, long, float, double, char, ...) s'inicialitzem sempre a zero i per tant, aquest tipus de dades, només precisaran inicialització en cas d'haver-se s'inicialitzar amb valors diferents de zero.</p>
                                    <h4>altres usos del gestor de dades</h4>
                                    <p>La classe especifica de gestió de les dades de l'estructura, pot contenir a més de les funcions que ajudin a minimitzar la incoherència, totes aquelles altres que considerem útils per ajudar-nos a manipular l'estructura de dades. De fet, aquestes classes poden admetre funcions de consulta, de càlcul, etc. Sovint és molt més senzill cridar una funció i esperar el resultat que haver de pensar com tractar l'estructura per obtenir el resultat desitjat, sobretot si cal repetir diverses vegades un tractament determinat. Tot allò que ens ajudi a gestionar les dades específiques de l'estructura pot tenir cabuda dins la classe.</p>
                                    </div>
                                    <!--h4>Recordeu</h4>
                                    <p>És important que recordeu que les funcions del gestor de dades són funcions auxiliars que s'han de poder utilitzar en diferents llocs de l'aplicació, per això no és un bona idea demanar dades a l'usuari des d'aquestes funcions, ni que es presentin els resultats per la pantalla. És preferible que les dades entrin via paràmetres i que les dades calculades o els resultats obtinguts es retornin com a paràmetres de sortida, mitjançant la opció de retorn o bé fent servir tipus de dades que es passin com a paràmetres per referència. Més endavant ja implementareu les demandes explicites de dades i les sortides per la pantalla. No us precipiteu. Aquí només cal implementar funcions de tractament  de les dades.</p>
                                    <p>
                                    
                                    Per tal d'anar avançant el projecte, caldrà crear, en el projecte on heu implementat els tipus compostos, un classe anomenada per exemple <em>GestorDeDades</em> on haureu d'implementar al menys les següents funcions:</p>
                                    <ul>
                                        <li>Una funció per afegir els usuaris que arribin de la importació. Assegureu-vos que els dades de l'usuari a afegir arribin per paràmetre. Podeu passar també, l'estructura de dades per paràmetre, recordeu que en tractar-se d'un tipus compost, es passa sempre per referència. La funció haurà d'afegir un nou usuari assegurant la coherència de l'estructura de dades un cop afegit el nou usuari. Podeu suposar que el DNI passat per paràmetre serà únic, no cal que comproveu si ja existeix a la col·lecció d'usuaris.</li>
                                        <li>Una funció que rebi l'estructura de dades adequada, junt amb dos cadenes, una contenint un DNI i l'altra contenint la contrasenya per autenticar l'usuari. Feu que es comprovi si coincideix la contrasenya passada amb l'emmagatzemada, corresponent a l'usuari identificat amb el DNI passat. En cas que les contrasenyes coincideixin, la funció retornarà el valor de la posició on s'ha trobat l'usuari autenticat. En cas que no hi hagi coincidència o que no existeixi cap usuari amb el DNI passat, caldrà retornar el valor -1.</li>
                                        <li>Una funció per afegir un nou anunci d'un immoble. Assegureu-vos que els dades de l'anunci a inserir, excepte l'identificador que cal generar-lo de forma automàtica, arribin per paràmetre. també caldrà que passeu per paràmetre la posició de l'usuari propietari a fi que quedin permanentment relacionats, propietari i anunci. Podeu passar també, l'estructura de dades per paràmetre, recordeu que en tractar-se d'un tipus compost, es passa sempre per referència. La funció haurà de generar un identificador únic (no repetit en cap altre anunci existent) i afegir l'anunci a la col·lecció existent, tot assegurant la coherència de l'estructura de dades en acabar la inserció. Podeu suposar que ja s'ha comprovat prèviament que l'usuari té menys de tres anuncis donats d'alta, no cal que feu aquí la comprovació.</li>
                                        <li>Una funció que verifiqui si és possible donar d'alta un anunci, d'un usuari. La funció hauria de rebre, a més de l'estructura de dades adient, la posició de l'usuari del qual cal fer la verificació. La funció comprovarà si l'usuari té actualment menys de 3 anuncis i retornarà cert en cas afirmatiu. En cas negatiu o en cas que la posició de l'usuari no sigui vàlida, retornarà fals.</li>
                                        <li>Una funció que elimini un anunci d'un usuari. Penseu quines dades haureu de passar per paràmetre per tal d'aconseguir l'eliminació i mantenir la coherència de les dades en acabar.</li>
                                        <li>Totes aquelles funcions que permetin inicialitzar les dades dels tipus compostos de forma coherent.</li>
                                        <li>Altres funcions que creieu necessàries d'implementar en el gestor de dades, d'acord amb el vostre disseny de l'estructura de dades i tenint en compte  els consells donats més amunt.</li>
                                    </ul>
                                    <p>En el projecte podeu afegir-hi la biblioteca <em>Strings</em> que heu implementat a l'activitat A501, potser podreu reaprofitar alguna funció. Recordeu també que teniu funcions fetes a l'activitat A404, que potser podreu aprofitar aquí.</p>
                                    <!-- Button trigger pannel -->
                                    <button type="button" class="btn btn-primary btn-lg btn-toggle toggle-off" 
                                            data-toggle="button"
                                            data-parent-selector="#leftColumnPanel"
                                            data-display-on-set-slide="slc-gestorDeDades" 
                                            data-selector-clue="#slc-gestorDeDades-clue1">
                                        Pista 1
                                    </button>                                        
                                    <div id="slc-gestorDeDades-clue1" class="iocClue hidden">
                                        <h2>Pista 1</h2>
                                        <p>Fixeu-vos que per implementar algunes de les funcions proposades podreu reutilitzar algunes de les funcions de la biblioteca Utils i també de les realitzades a l'activitat A404. Per facilitar-ne l'ús, si encara no ho heu fet, us proposem que copieu les 4 funcions de l''activitat A404 a la classe Utils i les adapteu per poder usar-les com a funcions estàtiques.</p>
                                    </div>  
                                    <!-- Button trigger pannel -->
                                    <button type="button" class="btn btn-primary btn-lg btn-toggle toggle-off" 
                                            data-toggle="button"
                                            data-parent-selector="#leftColumnPanel"
                                            data-display-on-set-slide="slc-gestorDeDades" 
                                            data-selector-clue="#slc-gestorDeDades-clue2">
                                        Pista 2
                                    </button>                                        
                                    <div id="slc-gestorDeDades-clue2" class="iocClue hidden">
                                        <h2>Pista 2</h2>
                                        <p>El procediment per crear i inicialitzar una instancia de l'estructura de dades dependrà molt del disseny que finalment hàgiu donat a l'estructura de dades. Malgrat tot plantegeu-vos si el disseny adoptat podria incórrer en una incoherència en cas de no fer servir una funció d'inicialització. Si fos així, caldria que n'implementéssiu una que evités la incoherència.</p>
                                    </div>  
                                    <!-- Button trigger pannel -->
                                    <button type="button" class="btn btn-primary btn-lg btn-toggle toggle-off" 
                                            data-toggle="button"
                                            data-parent-selector="#leftColumnPanel"
                                            data-display-on-set-slide="slc-gestorDeDades" 
                                            data-selector-clue="#slc-gestorDeDades-clue3">
                                        Pista 3
                                    </button>                                        
                                    <div id="slc-gestorDeDades-clue3" class="iocClue hidden">
                                        <h2>Pista 3</h2>
                                        <p>Plantegeu-vos també si seria necessari crear alguna funció que ajudés i facilités el tractament de les dades. Per exemple, penseu que un funció que se li passi l'estructura i l'identificador d'una parcel·la per paràmetre i retorni si l'identificador correson a una parcel·la buida o no, seria d'utilitat? </p>
                                     </div>  
                                </div> 
                            </div>
                        </div>
                    </div>
                </section>
                <!--=========== END SECTION gestor de dades ================-->    

            </section>
            <!--=========== END SECTION implementació ================-->    
            <!--=========== BEGIN SECTION toDelivery ================-->    
            <section id="slc-toDelivery">
                <div class="container">
                    <div class="row">
                        <div class="col-lg-12">
                            <div class= "headSlide">
                                 <h2 >Lliurament -Estructura de dades</h2>
                             </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-12">
                            <div class=bodySlide>
                                <p>Baixa't l'<span class="informeLliurament"></span> d'aquesta activitat i omple'l per poder fer el lliurament, ja que bàsicament, aquesta és una activitat de seguiment que serveix com indicador per verificar que avanceu correctament. El professor restarà atent al lliurament de l'informe on indicaràs si has aconseguit implementar l'estructura de dades, les funcions del gestor de dades i les biblioteques que se t'han demanat a les diverses tasques. En cas que hagis tingut dificultats, pots exposar-les a l'informe a fi que puguem donar-te una resposta durant la retroacció.</p>
                                <p>Només cal que enviïs l'informe. Malgrat tot, si ho creus necessari, pots enviar més d'un fitxer empaquetant-los tots junts en un fitxer ZIP que penjareu a la <span class="bustiaLliurament"></span>.</p>
                                <p>Es recomana acabar i lliurar aquesta activitat abans de la data recomanada: <strong class='dataRecomanada'></strong> i en tot cas mai després de la data límit: <strong class="dataLimit"></strong>.</p>
                                <p>És molt important per el vostre aprenentatge que feu els exercicis proposats, que ompliu l'informe i que el lliureu, ja que el professor podrà avaluar l'evolució del projecte i si cal us donarà un cop de mà. </p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <!--=========== END SECTION toDelivery ================-->    
            <!--=========== BEGIN SECTION toContinue ================-->    
            <section id="slc-toContinue">
                <div class="container">
                    <div class="row">
                        <div class="col-lg-12">
                            <div class= "headSlide">
                                 <h2 >Com continuar - Estructura de dades</h2>
                             </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-12">
                            <div class=bodySlide>
            <div class="marquee centerSlide iocwarning"> <img src="../images/enConstruccio.png" width="35" height="35" alt="en cosntrucció"> Text provisional. Estem treballant per millorar</div>                               
                                <p>Passeu a la següent <a class="toNextActivity">activitat</a></p>
                                <p>Si us cal, també podeu saltar <a class="toActivityTable targetBlank">a la taula d'activitats</a> per accedir a qualsevol altra activitat.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <!--=========== END SECTION toContinue ================-->    
        </div>
    </div>
    <!--=========== END MAIN SLIDER SECTION ================-->    

    <!--=========== BEGIN META-INFO PANELS ================-->    
    <div id="sidepanel-wrapper" class="left-position after-top-menu">
        <a id="panel-close" href="#" class="panel-close btn btn-light pull-right toggle"><i class="glyphicon glyphicon-remove-circle"></i></a>
        <div id="goals_info" class="bodySlide hidden"> 
            <h2>Objectius d'aprenentatge de l'activitat</h2>
            <div class="marquee centerSlide iocwarning"> <img src="../images/enConstruccio.png" width="35" height="35" alt="en cosntrucció"> Text provisional. Estem treballant per millorar</div>                               
            <p>Aquí s'afegiran els objectius específics d'aprenentatge treballats en aquesta activitat</p>

            <h2>Resultats d'aprenentatge del mòdul treballats en aquesta activitat</h2>
            <div class="marquee centerSlide iocwarning"> <img src="../images/enConstruccio.png" width="35" height="35" alt="en cosntrucció"> Text provisional. Estem treballant per millorar</div>                               
            <p>Aquí s'afegiran els resultats d'aprenentatge del mòdul que es treballen en aquesta activitat</p>
        </div>
        <div id="more_reinforcement" class="hidden"> 
            <h2>Més activitats i idees per reforçar l'aprenentatge</h2>
            <div class="marquee centerSlide iocwarning"> <img src="../images/enConstruccio.png" width="35" height="35" alt="en cosntrucció"> Text provisional. Estem treballant per millorar</div>                               
            <p>Aquí s'afegiran exercicis, activitats, lectures o referencies externes per tal que l'estudiant, pugui reforçar el conceptes estudiats </p>
        </div>
        <div id="more_info" class="hidden"> 
            <h2>Informació sobre funcions  per ampliar</h2>
            <div class="marquee centerSlide iocwarning"> <img src="../images/enConstruccio.png" width="35" height="35" alt="en cosntrucció"> Text provisional. Estem treballant per millorar</div>                               
            <p>Aquí s'afegiran lectures, activitats referències externes o bibliografia on l'estudiant, pugui ampliar l'aprenentatge si ho desitja</p>
        </div>
    </div>
    <!--=========== END META-INFO PANELS ================-->    
    
    <!--=========== BEGIN EMPTY PANEL ================-->    
    <div id="emptypanel-wrapper" class="right-position after-top-menu">
    </div>
    <!--=========== END EMPTY PANEL ================-->    
    
    <!--=========== BEGIN EMPTY MODAL WINDOW ================-->    
    <div id="modalWindow" class="iocModal hidden">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-selector-to-set-class="#modalWindow" data-class-to-set-class="iocModal hidden" aria-label="Close"><span aria-hidden="true">×</span></button>
            <h4 class="modal-title">Modal title</h4>
          </div>
          <div class="modal-body">
            
          </div>
          <div class="modal-footer">
          </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->
    <!--=========== END EMPTY MODAL WINDOW ================-->    

    <!--=========== BEGIN EMPTY LEFT COLUMN PANEL ================-->    
    <div id="leftColumnPanel" class="left-position column-panel after-top-menu">
    </div>
    <!--=========== END EMPTY LEFT COLUMN PANEL ================-->    

    <!--=========== BEGIN EMPTY HIDDEN PANEL ================-->    
    <div id="hiddenContent" class="hidden">
    </div>
    <!--=========== END EMPTY HIDDEN PANEL ================-->    

    <!--=========== BEGIN SCRIPTS ================-->    
    <!-- jQuery -->
    <script src="../js/jquery.js"></script>
    <script src="../js/jquery.easing.min.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="../js/bootstrap.min.js"></script>

    <!-- highlight.js plugin -->
    <script src="../js/highlight.pack.js"></script>

    <!-- jssor.js plugin -->
    <script src="../js/jssor.js"></script>
    <script src="../js/jssor.slider.js"></script>
    
    <!-- to run jssor here-->
    <script src="../js/jssorActivities.js"></script>

    <!-- slides functionality-->
    <script src="../js/scrolling-slides.js"></script>

    <!-- specific functionality for IOC activities-->
    <script src="../js/m03b2Activities.js"></script>

    <!-- specific functionality for this activ¡ty-->
    <script>
        $(document).ready(function(){
            var activityManager = new ActivityManager();
            
            activityManager.init("../data/toReplace.json", "A502");
            var iocSlider = new IocSlider();
            activityManager.updateDisplayButtons(iocSlider);
        });
    </script>
    <!--=========== END SCRIPTS ================-->    

</body>

</html>

